slug: git-merging-conflict-resolution
title: Git Merging and Conflict Resolution
difficulty: medium
sequence_order: 3
estimated_minutes: 20
key_concepts:
  - Merging
  - Fast-forward vs Non-fast-forward
  - Merge conflicts
  - Conflict markers
prerequisites:
  - lesson-1
  - git-branching-strategies
content_md: |
  # Git Merging and Conflict Resolution ü§ù

  # Git Merging

  Merging is the process of joining two or more development histories together.

  ## Merge Types

  ### 1. Fast-Forward Merge

  Occurs when the current branch has no extra commits compared to the target branch.

  ```bash
  # Situation:
  # main:    A --- B
  # feature:        \--- C --- D

  git checkout main
  git merge feature

  # Result:
  # main:    A --- B --- C --- D
  ```

  **Pros:** Linear history, clean.
  **Cons:** Loses context that a feature branch existed.

  ### 2. Three-Way Merge (Non-Fast-Forward)

  Occurs when both branches have progressed.

  ```bash
  # Situation:
  # main:    A --- B --- E
  # feature:        \--- C --- D

  git checkout main
  git merge feature

  # Result:
  # main:    A --- B --- E ------- M (Merge Commit)
  #                       /       /
  # feature:        \--- C --- D
  ```

  **Command:** `git merge --no-ff feature`
  **Pros:** Preserves history of the feature branch.
  **Cons:** Can clutter history if overused.

  ## Handling Merge Conflicts

  Conflicts happen when Git can't automatically determine how to merge changes (e.g., same line changed in both branches).

  ### 1. Identify Conflict

  ```bash
  $ git merge feature/login
  Auto-merging app.py
  CONFLICT (content): Merge conflict in app.py
  Automatic merge failed; fix conflicts and then commit the result.
  ```

  ### 2. View Conflict Status

  ```bash
  $ git status
  Unmerged paths:
    (use "git add <file>..." to mark resolution)
    both modified:   app.py
  ```

  ### 3. Resolve Conflict

  Open the file. You'll see markers:

  ```python
  def login():
  <<<<<<< HEAD
      print("Login v1")
  =======
      print("Login v2 - Secure")
  >>>>>>> feature/login
  ```

  **HEAD**: Changes in current branch (main).
  **feature/login**: Changes in incoming branch.

  **Action:** Edit the file to keep what you want, remove markers.

  ```python
  def login():
      print("Login v2 - Secure")
  ```

  ### 4. Finalize Merge

  ```bash
  git add app.py
  git commit -m "Merge feature/login and fix conflicts"
  ```

  ## Aborting a Merge

  If things get messy, you can always abort:

  ```bash
  git merge --abort
  ```

  ## Exercises

  Practice is key! Try the scenarios below.
exercises:
  - type: mcq
    sequence_order: 1
    question: "What causes a merge conflict?"
    options:
      - "Merging two branches with different names"
      - "Git running out of memory"
      - "Changes to the same line of a file in both branches"
      - "Merging a branch into itself"
    correct_answer: "Changes to the same line of a file in both branches"
    explanation: "Git is smart enough to merge changes in different files or different parts of the same file. Conflicts only occur when the same specific lines are modified in both branches, or a file is deleted in one and modified in another."
    require_pass: true

  - type: mcq
    sequence_order: 2
    question: "What does the '--no-ff' flag do in a merge?"
    options:
      - "Forces a fast-forward merge"
      - "Prevents a fast-forward merge, creating a merge commit"
      - "Aborts the merge if there is a conflict"
      - "Merges without file system checks"
    correct_answer: "Prevents a fast-forward merge, creating a merge commit"
    explanation: "--no-ff stands for 'no fast-forward'. Even if a fast-forward is possible, it forces Git to create a merge commit. This is useful to preserve the history that a feature branch existed and was merged at a specific point."
    require_pass: true

  - type: terminal
    sequence_order: 3
    command: git merge --abort
    description: "Abort an in-progress merge"
    hints:
      - "If you are in a conflicted state and want to give up: git merge --abort"
    validation:
      must_not_include:
        - "fatal: There is no merge to abort"
    timeout_sec: 30
    require_pass: false

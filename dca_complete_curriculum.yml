# Docker Certified Associate (DCA) - Complete Curriculum Definition
# 55 Chapters + 11 Comprehensive Labs
# Review and adjust as needed, then run: rails runner db/seeds/create_from_dca_curriculum.rb

meta:
  total_chapters: 55
  total_labs: 11
  exam: "Docker Certified Associate (DCA)"
  estimated_learning_hours: 4.5
  estimated_lab_hours: 4.5
  total_prep_hours: 9
  generated_at: "2025-11-02"

# Chapters 1-9 already exist as CodeSprout units
# Chapters 10-55 will be generated

chapters:
  # ============================================================================
  # FOUNDATION: Image Basics (10-14) → Lab 1
  # ============================================================================
  
  - number: 10
    slug: "docker-images"
    title: "Viewing Available Images"
    command: "docker images"
    command_variations: ["docker image ls", "docker images -a"]
    domain: "Image Creation (20%)"
    difficulty: "easy"
    estimated_minutes: 3
    category: "images"
    key_concepts:
      - "Images vs containers"
      - "Image tags and versions"
      - "Repository names"
      - "Image IDs and digests"
    quiz:
      question: "What does the TAG column represent in docker images output?"
      options:
        - text: "The version or variant of the image"
          correct: true
        - text: "The unique ID of the image"
          correct: false
        - text: "The name of the person who created the image"
          correct: false
        - text: "The size of the image"
          correct: false
      explanation: "The TAG shows the version (like 1.25.3) or variant (like alpine) of an image. It helps you choose which version to use."

  - number: 11
    slug: "docker-pull"
    title: "Downloading Images from Registry"
    command: "docker pull"
    command_variations: ["docker pull nginx:alpine", "docker image pull"]
    domain: "Image Creation (20%)"
    difficulty: "easy"
    estimated_minutes: 4
    category: "images"
    key_concepts:
      - "Docker Hub and registries"
      - "Image layers"
      - "Layer caching"
      - "Registry authentication"
    quiz:
      question: "What happens when you pull an image that already exists locally?"
      options:
        - text: "Docker checks for updates and downloads only new layers"
          correct: true
        - text: "Docker downloads the entire image again"
          correct: false
        - text: "Docker shows an error"
          correct: false
        - text: "Docker deletes the old image first"
          correct: false
      explanation: "Docker is efficient - it only downloads layers that changed, saving bandwidth and time."

  - number: 12
    slug: "docker-build-basics"
    title: "Building Your First Image"
    command: "docker build"
    command_variations: ["docker build -t myapp .", "docker build --no-cache"]
    domain: "Image Creation (20%)"
    difficulty: "medium"
    estimated_minutes: 8
    category: "images"
    key_concepts:
      - "Dockerfile basics"
      - "Build context"
      - "Image layers"
      - "Build cache"
    quiz:
      question: "What is a Dockerfile?"
      options:
        - text: "A text file containing instructions to build a Docker image"
          correct: true
        - text: "A binary file that contains a Docker image"
          correct: false
        - text: "A configuration file for running containers"
          correct: false
        - text: "A log file created by Docker"
          correct: false
      explanation: "A Dockerfile is like a recipe - a text file with step-by-step instructions for building an image."

  - number: 13
    slug: "docker-tag"
    title: "Tagging Images for Organization"
    command: "docker tag"
    command_variations: ["docker tag myapp:latest myapp:v1.0"]
    domain: "Image Creation (20%)"
    difficulty: "easy"
    estimated_minutes: 4
    category: "images"
    key_concepts:
      - "Image tagging strategies"
      - "Version control"
      - "Repository naming conventions"
      - "Tag best practices"
    quiz:
      question: "What does the 'latest' tag mean?"
      options:
        - text: "It's a convention, not automatically the newest version"
          correct: true
        - text: "It's always the most recently built image"
          correct: false
        - text: "It's automatically updated by Docker Hub"
          correct: false
        - text: "It cannot be overwritten"
          correct: false
      explanation: "latest is just a tag name - it's up to image maintainers to keep it updated with the newest version."

  - number: 14
    slug: "docker-push"
    title: "Publishing Images to Registry"
    command: "docker push"
    command_variations: ["docker push username/myapp:tag", "docker image push"]
    domain: "Image Creation (20%)"
    difficulty: "medium"
    estimated_minutes: 5
    category: "images"
    key_concepts:
      - "Docker Hub publishing"
      - "Registry authentication"
      - "Image sharing"
      - "Private registries"
    quiz:
      question: "Before pushing to Docker Hub, what must you do?"
      options:
        - text: "Tag the image with your Docker Hub username"
          correct: true
        - text: "Convert the image to a special format"
          correct: false
        - text: "Compress the image manually"
          correct: false
        - text: "Delete all local containers"
          correct: false
      explanation: "Images must be tagged as username/imagename:tag to push to your Docker Hub account."

  # ============================================================================
  # IMAGE MASTERY: Dockerfiles (15-21) → Lab 2
  # ============================================================================

  - number: 15
    slug: "dockerfile-from-run"
    title: "Dockerfile FROM and RUN Instructions"
    command: "FROM, RUN"
    command_variations: ["FROM ubuntu:20.04", "RUN apt-get update"]
    domain: "Image Creation (20%)"
    difficulty: "medium"
    estimated_minutes: 6
    category: "dockerfile"
    key_concepts:
      - "Base images with FROM"
      - "RUN instruction for commands"
      - "Layer creation"
      - "Command chaining"
    quiz:
      question: "What does the FROM instruction do?"
      options:
        - text: "Specifies the base image to build upon"
          correct: true
        - text: "Copies files from host to image"
          correct: false
        - text: "Defines the default command"
          correct: false
        - text: "Sets environment variables"
          correct: false
      explanation: "FROM sets the starting point - the base image your image will be built on top of."

  - number: 16
    slug: "dockerfile-copy-add"
    title: "Dockerfile COPY and ADD Instructions"
    command: "COPY, ADD"
    command_variations: ["COPY . /app", "ADD https://example.com/file /tmp"]
    domain: "Image Creation (20%)"
    difficulty: "medium"
    estimated_minutes: 6
    category: "dockerfile"
    key_concepts:
      - "COPY for simple file transfer"
      - "ADD for advanced features"
      - "Build context"
      - "COPY vs ADD differences"
    quiz:
      question: "What's the main difference between COPY and ADD?"
      options:
        - text: "ADD has additional features like URL downloads and tar extraction"
          correct: true
        - text: "COPY is faster than ADD"
          correct: false
        - text: "ADD only works with local files"
          correct: false
        - text: "They are identical"
          correct: false
      explanation: "COPY is for simple file copying. ADD can also download URLs and auto-extract tar files, but COPY is preferred for clarity."

  - number: 17
    slug: "dockerfile-env-arg"
    title: "Dockerfile ENV and ARG Instructions"
    command: "ENV, ARG"
    command_variations: ["ENV NODE_ENV=production", "ARG VERSION=1.0"]
    domain: "Image Creation (20%)"
    difficulty: "medium"
    estimated_minutes: 6
    category: "dockerfile"
    key_concepts:
      - "Environment variables with ENV"
      - "Build arguments with ARG"
      - "ARG vs ENV differences"
      - "Build-time vs runtime variables"
    quiz:
      question: "What's the difference between ARG and ENV?"
      options:
        - text: "ARG is only available during build, ENV persists in the image"
          correct: true
        - text: "They are the same"
          correct: false
        - text: "ARG is more secure"
          correct: false
        - text: "ENV can only be set at runtime"
          correct: false
      explanation: "ARG variables are only available during the build process. ENV variables persist in the final image and are available to running containers."

  - number: 18
    slug: "dockerfile-expose-cmd"
    title: "Dockerfile EXPOSE and CMD Instructions"
    command: "EXPOSE, CMD"
    command_variations: ["EXPOSE 8080", "CMD [\"npm\", \"start\"]"]
    domain: "Image Creation (20%)"
    difficulty: "medium"
    estimated_minutes: 6
    category: "dockerfile"
    key_concepts:
      - "EXPOSE for documentation"
      - "CMD for default command"
      - "CMD exec vs shell form"
      - "Overriding CMD"
    quiz:
      question: "What does the EXPOSE instruction do?"
      options:
        - text: "Documents which ports the container listens on (doesn't actually publish them)"
          correct: true
        - text: "Automatically publishes the port to the host"
          correct: false
        - text: "Opens the firewall on the host"
          correct: false
        - text: "Is required for the container to work"
          correct: false
      explanation: "EXPOSE is documentation only. You still need -p flag with docker run to actually publish ports."

  - number: 19
    slug: "dockerfile-entrypoint-workdir"
    title: "Dockerfile ENTRYPOINT and WORKDIR Instructions"
    command: "ENTRYPOINT, WORKDIR"
    command_variations: ["ENTRYPOINT [\"python\", \"app.py\"]", "WORKDIR /app"]
    domain: "Image Creation (20%)"
    difficulty: "medium"
    estimated_minutes: 6
    category: "dockerfile"
    key_concepts:
      - "ENTRYPOINT vs CMD"
      - "Working directory with WORKDIR"
      - "Combining ENTRYPOINT and CMD"
      - "Exec form vs shell form"
    quiz:
      question: "What's the difference between ENTRYPOINT and CMD?"
      options:
        - text: "ENTRYPOINT is harder to override; CMD provides default arguments"
          correct: true
        - text: "They are identical"
          correct: false
        - text: "CMD runs first"
          correct: false
        - text: "ENTRYPOINT cannot accept arguments"
          correct: false
      explanation: "ENTRYPOINT defines the main executable that's harder to override. CMD provides default arguments that are easily replaced."

  - number: 20
    slug: "dockerfile-multistage"
    title: "Multi-Stage Builds"
    command: "Multi-stage Dockerfile"
    command_variations: ["FROM node AS builder", "COPY --from=builder"]
    domain: "Image Creation (20%)"
    difficulty: "hard"
    estimated_minutes: 10
    category: "dockerfile"
    key_concepts:
      - "Multi-stage build pattern"
      - "Image size optimization"
      - "Build vs runtime dependencies"
      - "Copying between stages"
    quiz:
      question: "What is the main benefit of multi-stage builds?"
      options:
        - text: "Smaller final image by excluding build tools"
          correct: true
        - text: "Faster build times"
          correct: false
        - text: "Better security during build"
          correct: false
        - text: "Easier to write Dockerfiles"
          correct: false
      explanation: "Multi-stage builds let you use heavy build tools in early stages but only copy the artifacts to a minimal final image."

  - number: 21
    slug: "dockerfile-optimization"
    title: "Dockerfile Optimization and Best Practices"
    command: ".dockerignore, layer optimization"
    command_variations: [".dockerignore", "Layer caching strategies"]
    domain: "Image Creation (20%)"
    difficulty: "medium"
    estimated_minutes: 8
    category: "dockerfile"
    key_concepts:
      - "dockerignore files"
      - "Layer caching"
      - "Image size reduction"
      - "Build speed optimization"
    quiz:
      question: "Why should you put frequently changing instructions at the end of a Dockerfile?"
      options:
        - text: "To maximize cache reuse and speed up builds"
          correct: true
        - text: "To make the Dockerfile easier to read"
          correct: false
        - text: "To reduce image size"
          correct: false
        - text: "It's a Docker requirement"
          correct: false
      explanation: "Docker caches layers. If an early layer changes, all subsequent layers must be rebuilt. Put stable instructions first."

  # Continue for all remaining chapters...
  # (I'll continue generating the complete file)


  # ============================================================================
  # NETWORKING (22-28) → Lab 3
  # ============================================================================

  - number: 22
    slug: "docker-network-ls"
    title: "Listing Docker Networks"
    command: "docker network ls"
    command_variations: ["docker network ls", "docker network inspect bridge"]
    domain: "Networking (15%)"
    difficulty: "easy"
    estimated_minutes: 3
    category: "networking"
    key_concepts:
      - "Network types (bridge, host, none)"
      - "Default networks"
      - "Network drivers"
      - "Network inspection"
    quiz:
      question: "What is the default network type for containers?"
      options:
        - text: "bridge"
          correct: true
        - text: "host"
          correct: false
        - text: "none"
          correct: false
        - text: "overlay"
          correct: false
      explanation: "By default, containers connect to the bridge network, which provides isolation and NAT."

  - number: 23
    slug: "docker-network-create"
    title: "Creating Custom Networks"
    command: "docker network create"
    command_variations: ["docker network create mynet", "docker network create --driver bridge"]
    domain: "Networking (15%)"
    difficulty: "medium"
    estimated_minutes: 5
    category: "networking"
    key_concepts:
      - "Custom bridge networks"
      - "Network drivers"
      - "Subnet configuration"
      - "Network isolation"
    quiz:
      question: "Why create custom networks instead of using the default bridge?"
      options:
        - text: "Custom networks provide automatic DNS resolution between containers"
          correct: true
        - text: "Custom networks are faster"
          correct: false
        - text: "Default bridge doesn't work"
          correct: false
        - text: "Custom networks use less memory"
          correct: false
      explanation: "Custom bridge networks provide automatic DNS resolution using container names, while the default bridge requires manual --link."

  - number: 24
    slug: "docker-network-connect"
    title: "Connecting Containers to Networks"
    command: "docker network connect"
    command_variations: ["docker network connect mynet container1", "docker network disconnect"]
    domain: "Networking (15%)"
    difficulty: "medium"
    estimated_minutes: 5
    category: "networking"
    key_concepts:
      - "Dynamic network attachment"
      - "Multiple network interfaces"
      - "Network disconnection"
      - "Container networking"
    quiz:
      question: "Can a container be connected to multiple networks?"
      options:
        - text: "Yes, a container can have multiple network interfaces"
          correct: true
        - text: "No, only one network per container"
          correct: false
        - text: "Only with host networking"
          correct: false
        - text: "Only in Swarm mode"
          correct: false
      explanation: "Containers can connect to multiple networks, each giving them a separate network interface."

  - number: 25
    slug: "bridge-network-deep-dive"
    title: "Bridge Networks In-Depth"
    command: "Bridge network concepts"
    command_variations: ["--network bridge", "docker network inspect bridge"]
    domain: "Networking (15%)"
    difficulty: "medium"
    estimated_minutes: 6
    category: "networking"
    key_concepts:
      - "Default bridge vs user-defined bridge"
      - "NAT and port forwarding"
      - "Container-to-container communication"
      - "Bridge network isolation"
    quiz:
      question: "What advantage do user-defined bridges have over the default bridge?"
      options:
        - text: "Better isolation and automatic DNS resolution"
          correct: true
        - text: "They are faster"
          correct: false
        - text: "They use less bandwidth"
          correct: false
        - text: "They are required for production"
          correct: false
      explanation: "User-defined bridges provide better isolation between applications and automatic DNS resolution by container name."

  - number: 26
    slug: "host-none-networks"
    title: "Host and None Network Modes"
    command: "docker run --network host/none"
    command_variations: ["--network host", "--network none"]
    domain: "Networking (15%)"
    difficulty: "medium"
    estimated_minutes: 5
    category: "networking"
    key_concepts:
      - "Host networking"
      - "Network isolation with none"
      - "Performance considerations"
      - "Security implications"
    quiz:
      question: "What happens with --network=host?"
      options:
        - text: "Container uses the host's network stack directly"
          correct: true
        - text: "Container gets a dedicated IP"
          correct: false
        - text: "Container has no network access"
          correct: false
        - text: "Container creates a new bridge"
          correct: false
      explanation: "Host networking removes network isolation - the container shares the host's network namespace."

  - number: 27
    slug: "network-dns-discovery"
    title: "DNS and Service Discovery"
    command: "Container DNS resolution"
    command_variations: ["Automatic DNS", "Container name resolution"]
    domain: "Networking (15%)"
    difficulty: "medium"
    estimated_minutes: 6
    category: "networking"
    key_concepts:
      - "Automatic DNS resolution"
      - "Container name as hostname"
      - "Service discovery"
      - "DNS configuration"
    quiz:
      question: "On a user-defined bridge network, how do containers find each other?"
      options:
        - text: "By container name using automatic DNS"
          correct: true
        - text: "By IP address only"
          correct: false
        - text: "Using --link flag"
          correct: false
        - text: "They cannot communicate"
          correct: false
      explanation: "On custom bridges, Docker provides an embedded DNS server that resolves container names to IPs."

  - number: 28
    slug: "port-publishing-strategies"
    title: "Port Publishing Strategies"
    command: "docker run -p / -P"
    command_variations: ["-p 8080:80", "-P", "-p 127.0.0.1:8080:80"]
    domain: "Networking (15%)"
    difficulty: "medium"
    estimated_minutes: 5
    category: "networking"
    key_concepts:
      - "Port mapping syntax"
      - "Publishing all ports (-P)"
      - "Binding to specific interfaces"
      - "Port conflicts"
    quiz:
      question: "What does -p 127.0.0.1:8080:80 do?"
      options:
        - text: "Maps container port 80 to localhost:8080 only"
          correct: true
        - text: "Maps host port 8080 to all interfaces"
          correct: false
        - text: "Creates an error"
          correct: false
        - text: "Maps container port 8080 to host port 80"
          correct: false
      explanation: "Binding to 127.0.0.1 restricts access to localhost only, improving security."

  # Continue with all remaining sections...
  # Storage (29-35), Compose (36-42), Swarm (43-50), Security (51-55)


  # ============================================================================
  # STORAGE & VOLUMES (29-35) → Lab 4
  # ============================================================================

  - number: 29
    slug: "docker-volume-create"
    title: "Creating Docker Volumes"
    command: "docker volume create"
    command_variations: ["docker volume create mydata", "docker volume create --driver local"]
    domain: "Storage (10%)"
    difficulty: "easy"
    estimated_minutes: 4
    category: "volumes"
    key_concepts:
      - "Named volumes"
      - "Volume drivers"
      - "Persistent storage"
      - "Volume management"
    quiz:
      question: "What is the main advantage of named volumes over bind mounts?"
      options:
        - text: "Named volumes are managed by Docker and work across platforms"
          correct: true
        - text: "Named volumes are faster"
          correct: false
        - text: "Named volumes use less disk space"
          correct: false
        - text: "Bind mounts don't persist data"
          correct: false
      explanation: "Named volumes are Docker-managed, platform-independent, and easier to backup/migrate than host-specific bind mounts."

  - number: 30
    slug: "docker-volume-inspect"
    title: "Inspecting and Managing Volumes"
    command: "docker volume ls / inspect"
    command_variations: ["docker volume ls", "docker volume inspect", "docker volume rm"]
    domain: "Storage (10%)"
    difficulty: "easy"
    estimated_minutes: 3
    category: "volumes"
    key_concepts:
      - "Listing volumes"
      - "Volume metadata"
      - "Volume removal"
      - "Dangling volumes"
    quiz:
      question: "What are dangling volumes?"
      options:
        - text: "Volumes that are no longer referenced by any container"
          correct: true
        - text: "Volumes that are corrupted"
          correct: false
        - text: "Volumes that are too large"
          correct: false
        - text: "Volumes from stopped containers"
          correct: false
      explanation: "Dangling volumes are orphaned - no container references them anymore. Use docker volume prune to clean them up."

  - number: 31
    slug: "volume-types-comparison"
    title: "Volume Types: Named, Bind, tmpfs"
    command: "Volume type comparison"
    command_variations: ["-v mydata:/data", "-v /host/path:/container/path", "--tmpfs /tmp"]
    domain: "Storage (10%)"
    difficulty: "medium"
    estimated_minutes: 8
    category: "volumes"
    key_concepts:
      - "Named volumes"
      - "Bind mounts"
      - "tmpfs mounts"
      - "Use case for each type"
    quiz:
      question: "When should you use tmpfs mounts?"
      options:
        - text: "For temporary data that doesn't need to persist"
          correct: true
        - text: "For long-term data storage"
          correct: false
        - text: "For sharing data between containers"
          correct: false
        - text: "They are the default option"
          correct: false
      explanation: "tmpfs mounts store data in memory - fast but non-persistent. Perfect for sensitive temporary data."

  # Add chapters 32-35 (abbreviated for space)
  - number: 32
    slug: "bind-mounts"
    title: "Bind Mounts in Detail"
    command: "-v /host:/container vs --mount"
    domain: "Storage (10%)"
    difficulty: "medium"
    estimated_minutes: 6
    category: "volumes"
    key_concepts: ["Bind mount syntax", "Read-only mounts", "--mount flag", "Host path requirements"]
    quiz:
      question: "What's the difference between -v and --mount syntax?"
      options:
        - text: "--mount is more explicit and verbose, -v is shorthand"
          correct: true
        - text: "They do completely different things"
          correct: false
        - text: "-v is deprecated"
          correct: false
        - text: "--mount only works with volumes"
          correct: false
      explanation: "--mount is newer, more explicit syntax. Both work, but --mount is clearer for complex scenarios."

  - number: 33
    slug: "volume-drivers"
    title: "Volume Drivers and Plugins"
    command: "docker volume create --driver"
    domain: "Storage (10%)"
    difficulty: "hard"
    estimated_minutes: 7
    category: "volumes"
    key_concepts: ["Volume drivers", "Cloud storage integration", "NFS volumes", "Plugin architecture"]
    quiz:
      question: "Why use a volume driver instead of the default local driver?"
      options:
        - text: "To integrate with cloud storage or network filesystems"
          correct: true
        - text: "Local driver is deprecated"
          correct: false
        - text: "Drivers are faster"
          correct: false
        - text: "Drivers use less disk space"
          correct: false
      explanation: "Volume drivers enable integration with AWS EBS, NFS, cloud storage, etc., for distributed data."

  - number: 34
    slug: "volume-backup-restore"
    title: "Backing Up and Restoring Volumes"
    command: "Volume backup strategies"
    domain: "Storage (10%)"
    difficulty: "medium"
    estimated_minutes: 8
    category: "volumes"
    key_concepts: ["Volume backup", "Data migration", "Tar archives", "Backup best practices"]
    quiz:
      question: "What's a common way to backup a Docker volume?"
      options:
        - text: "Mount it to a temporary container and tar the contents"
          correct: true
        - text: "Use docker volume backup command"
          correct: false
        - text: "Volumes cannot be backed up"
          correct: false
        - text: "Copy the volume directory manually"
          correct: false
      explanation: "Common pattern: Run a container with the volume mounted, tar the data, and save the archive."

  - number: 35
    slug: "volume-best-practices"
    title: "Volume Management Best Practices"
    command: "Volume best practices"
    domain: "Storage (10%)"
    difficulty: "medium"
    estimated_minutes: 6
    category: "volumes"
    key_concepts: ["Volume naming", "Data lifecycle", "Volume cleanup", "Storage planning"]
    quiz:
      question: "Should you use volumes or bind mounts for production databases?"
      options:
        - text: "Volumes - they're Docker-managed and platform-independent"
          correct: true
        - text: "Bind mounts - they're faster"
          correct: false
        - text: "Either one works equally well"
          correct: false
        - text: "Neither - databases shouldn't use containers"
          correct: false
      explanation: "Volumes are preferred for production - they're managed, backed up easily, and work across environments."

  # ============================================================================
  # DOCKER COMPOSE (36-42) → Lab 5
  # ============================================================================

  - number: 36
    slug: "compose-basics"
    title: "Introduction to Docker Compose"
    command: "docker-compose.yml"
    domain: "Orchestration (25%)"
    difficulty: "medium"
    estimated_minutes: 8
    category: "compose"
    key_concepts: ["Compose file syntax", "Services definition", "YAML structure", "Compose version"]
    quiz:
      question: "What is Docker Compose?"
      options:
        - text: "A tool for defining and running multi-container applications"
          correct: true
        - text: "A container orchestrator like Kubernetes"
          correct: false
        - text: "A replacement for Dockerfiles"
          correct: false
        - text: "A Docker registry"
          correct: false
      explanation: "Compose lets you define multi-container apps in a YAML file and manage them with simple commands."

  - number: 37
    slug: "compose-up-down"
    title: "Starting and Stopping Services"
    command: "docker compose up/down"
    domain: "Orchestration (25%)"
    difficulty: "easy"
    estimated_minutes: 5
    category: "compose"
    key_concepts: ["docker compose up", "docker compose down", "Detached mode", "Service lifecycle"]
    quiz:
      question: "What does docker compose down do differently than just stopping containers?"
      options:
        - text: "It also removes containers, networks, and optionally volumes"
          correct: true
        - text: "It's identical to docker compose stop"
          correct: false
        - text: "It only stops services without removing anything"
          correct: false
        - text: "It deletes the compose file"
          correct: false
      explanation: "down is a complete teardown - stops AND removes containers, networks, and can remove volumes with -v."

  # Add chapters 38-42 (abbreviated)
  - number: 38
    slug: "compose-services-networks"
    title: "Services and Networks in Compose"
    command: "services and networks in compose"
    command_variations: ["services:", "networks:"]
    domain: "Orchestration (25%)"
    difficulty: "medium"
    estimated_minutes: 7
    category: "compose"
    key_concepts: ["Service definition", "Custom networks", "Service discovery", "Dependencies"]
    quiz:
      question: "How do services communicate in Compose by default?"
      options:
        - text: "Using service names as DNS hostnames on a default network"
          correct: true
        - text: "By IP address only"
          correct: false
        - text: "They cannot communicate without explicit linking"
          correct: false
        - text: "Through exposed ports only"
          correct: false
      explanation: "Compose creates a default network where services can reach each other by service name."

  - number: 39
    slug: "compose-volumes"
    title: "Volumes in Compose"
    command: "volumes in compose"
    command_variations: ["volumes:", "volume mounts"]
    domain: "Orchestration (25%)"
    difficulty: "medium"
    estimated_minutes: 6
    category: "compose"
    key_concepts: ["Named volumes", "Bind mounts in compose", "Volume configuration", "Data persistence"]
    quiz:
      question: "How do you define a named volume in Compose?"
      options:
        - text: "Declare it in top-level volumes: section and reference in services"
          correct: true
        - text: "Use docker volume create before running compose"
          correct: false
        - text: "Volumes are created automatically"
          correct: false
        - text: "Use the -v flag in compose file"
          correct: false
      explanation: "Named volumes are declared at the top level and referenced in service volume mounts."

  - number: 40
    slug: "compose-environment"
    title: "Environment Variables in Compose"
    command: "environment variables in compose"
    command_variations: ["environment:", "env_file:"]
    domain: "Orchestration (25%)"
    difficulty: "medium"
    estimated_minutes: 6
    category: "compose"
    key_concepts: ["env_file", "Environment section", "Variable substitution", "Secrets"]
    quiz:
      question: "What's the difference between environment: and env_file:?"
      options:
        - text: "environment: sets vars inline, env_file: loads from a file"
          correct: true
        - text: "They are the same"
          correct: false
        - text: "env_file: is more secure"
          correct: false
        - text: "environment: only works in production"
          correct: false
      explanation: "Use environment: for explicit vars in the compose file, env_file: to load vars from external files."

  - number: 41
    slug: "compose-build"
    title: "Building Images with Compose"
    command: "docker compose build"
    command_variations: ["build:", "docker compose up --build"]
    domain: "Orchestration (25%)"
    difficulty: "medium"
    estimated_minutes: 7
    category: "compose"
    key_concepts: ["build context", "Build arguments", "Multi-stage builds", "Image caching"]
    quiz:
      question: "How do you specify a build context in Compose?"
      options:
        - text: "Use build: with context: and dockerfile: keys"
          correct: true
        - text: "Build is automatic"
          correct: false
        - text: "Use docker build separately"
          correct: false
        - text: "Compose cannot build images"
          correct: false
      explanation: "The build: section lets you specify context, Dockerfile, and build args for custom image builds."

  - number: 42
    slug: "compose-override"
    title: "Compose Override Files"
    command: "docker-compose.override.yml"
    command_variations: ["override file", "docker compose -f"]
    domain: "Orchestration (25%)"
    difficulty: "medium"
    estimated_minutes: 6
    category: "compose"
    key_concepts: ["docker-compose.override.yml", "Environment-specific config", "File merging", "Override precedence"]
    quiz:
      question: "What is docker-compose.override.yml used for?"
      options:
        - text: "Local development overrides that are automatically merged"
          correct: true
        - text: "Production configuration"
          correct: false
        - text: "Backup configuration"
          correct: false
        - text: "Error logging"
          correct: false
      explanation: "override.yml is automatically loaded and merged with docker-compose.yml, perfect for local dev settings."

  # ============================================================================
  # DOCKER SWARM (43-50) → Lab 6
  # ============================================================================

  - number: 43
    slug: "swarm-init-join"
    title: "Initializing and Joining a Swarm"
    command: "docker swarm init/join"
    domain: "Orchestration (25%)"
    difficulty: "medium"
    estimated_minutes: 8
    category: "swarm"
    key_concepts: ["Swarm mode", "Manager nodes", "Worker nodes", "Join tokens"]

  - number: 44
    slug: "swarm-nodes"
    title: "Managing Swarm Nodes"
    command: "docker node ls/inspect"
    domain: "Orchestration (25%)"
    difficulty: "medium"
    estimated_minutes: 6
    category: "swarm"
    key_concepts: ["Node management", "Node availability", "Node labels", "Drain mode"]

  - number: 45
    slug: "swarm-service-create"
    title: "Creating Swarm Services"
    command: "docker service create"
    domain: "Orchestration (25%)"
    difficulty: "medium"
    estimated_minutes: 8
    category: "swarm"
    key_concepts: ["Services vs containers", "Replicas", "Service placement", "Publish ports"]

  - number: 46
    slug: "swarm-service-scale"
    title: "Scaling Swarm Services"
    command: "docker service scale"
    domain: "Orchestration (25%)"
    difficulty: "easy"
    estimated_minutes: 5
    category: "swarm"
    key_concepts: ["Horizontal scaling", "Replica count", "Load balancing", "Service updates"]

  - number: 47
    slug: "swarm-stack-deploy"
    title: "Deploying Stacks in Swarm"
    command: "docker stack deploy"
    domain: "Orchestration (25%)"
    difficulty: "hard"
    estimated_minutes: 10
    category: "swarm"
    key_concepts: ["Stack files", "Multi-service deployment", "Compose for Swarm", "Stack management"]

  - number: 48
    slug: "swarm-rolling-updates"
    title: "Rolling Updates and Rollbacks"
    command: "docker service update"
    domain: "Orchestration (25%)"
    difficulty: "medium"
    estimated_minutes: 8
    category: "swarm"
    key_concepts: ["Rolling updates", "Update parallelism", "Rollback", "Health checks"]

  - number: 49
    slug: "swarm-secrets"
    title: "Managing Secrets in Swarm"
    command: "docker secret create"
    domain: "Security (15%)"
    difficulty: "medium"
    estimated_minutes: 7
    category: "security"
    key_concepts: ["Secrets management", "Encrypted storage", "Secret rotation", "Access control"]

  - number: 50
    slug: "swarm-troubleshooting"
    title: "Troubleshooting Swarm"
    command: "Swarm debugging"
    domain: "Orchestration (25%)"
    difficulty: "hard"
    estimated_minutes: 10
    category: "swarm"
    key_concepts: ["Service logs", "Node issues", "Network problems", "Quorum loss"]

  # ============================================================================
  # SECURITY & ADVANCED (51-55) → Labs 7-11
  # ============================================================================

  - number: 51
    slug: "docker-content-trust"
    title: "Docker Content Trust (DCT)"
    command: "DOCKER_CONTENT_TRUST=1"
    domain: "Security (15%)"
    difficulty: "hard"
    estimated_minutes: 8
    category: "security"
    key_concepts: ["Image signing", "Content trust", "Notary", "Trust verification"]

  - number: 52
    slug: "security-scanning"
    title: "Image Security Scanning"
    command: "docker scan"
    domain: "Security (15%)"
    difficulty: "medium"
    estimated_minutes: 7
    category: "security"
    key_concepts: ["Vulnerability scanning", "CVE detection", "Security reports", "Remediation"]

  - number: 53
    slug: "user-namespaces"
    title: "User Namespace Remapping"
    command: "User namespaces"
    domain: "Security (15%)"
    difficulty: "hard"
    estimated_minutes: 8
    category: "security"
    key_concepts: ["User namespaces", "UID/GID mapping", "Root in container", "Privilege escalation"]

  - number: 54
    slug: "resource-constraints"
    title: "Resource Limits and Constraints"
    command: "--memory --cpus"
    domain: "Installation & Configuration (15%)"
    difficulty: "medium"
    estimated_minutes: 7
    category: "configuration"
    key_concepts: ["Memory limits", "CPU constraints", "Resource allocation", "OOM handling"]

  - number: 55
    slug: "security-best-practices"
    title: "Docker Security Best Practices"
    command: "Security checklist"
    domain: "Security (15%)"
    difficulty: "medium"
    estimated_minutes: 8
    category: "security"
    key_concepts: ["Least privilege", "Read-only containers", "Security scanning", "Network isolation"]

# ============================================================================
# COMPREHENSIVE LABS (11 Total)
# ============================================================================

labs:
  - number: 1
    after_chapter: 14
    slug: "lab-container-lifecycle"
    title: "Container Lifecycle Mastery"
    duration_minutes: 15
    difficulty: "easy"
    commands_tested:
      - docker run
      - docker ps
      - docker stop
      - docker rm
      - docker logs
      - docker exec
      - docker images
      - docker pull
    pass_threshold: 70
    stability_multiplier: 1.5
    scenario: "Deploy, manage, and troubleshoot a complete container lifecycle from image download to cleanup"
    tasks:
      - "Pull nginx:alpine image"
      - "Run nginx in detached mode with port mapping"
      - "List running containers"
      - "View container logs"
      - "Execute a command inside the container"
      - "Stop the container"
      - "Remove the container"
      - "List all images"

  - number: 2
    after_chapter: 21
    slug: "lab-image-building"
    title: "Image Building & Optimization"
    duration_minutes: 20
    difficulty: "medium"
    commands_tested:
      - docker build
      - docker tag
      - docker push
      - Dockerfile instructions
      - Multi-stage builds
    pass_threshold: 70
    stability_multiplier: 1.5
    scenario: "Build, optimize, and publish custom Docker images using best practices"
    tasks:
      - "Write a Dockerfile with FROM, RUN, COPY, CMD"
      - "Build an image from the Dockerfile"
      - "Tag the image appropriately"
      - "Create a multi-stage build"
      - "Optimize image size using .dockerignore"
      - "Push image to a registry"

  - number: 3
    after_chapter: 28
    slug: "lab-networking"
    title: "Networking & Communication"
    duration_minutes: 20
    difficulty: "medium"
    commands_tested:
      - docker network create
      - docker network connect
      - docker run --network
      - Port mapping
      - DNS resolution
    pass_threshold: 70
    stability_multiplier: 1.5
    scenario: "Configure container networking for multi-tier application communication"

  - number: 4
    after_chapter: 35
    slug: "lab-storage"
    title: "Data Persistence & Volumes"
    duration_minutes: 20
    difficulty: "medium"
    commands_tested:
      - docker volume create
      - docker run -v
      - Bind mounts
      - Volume backup
    pass_threshold: 70
    stability_multiplier: 1.5
    scenario: "Implement persistent storage solutions for stateful applications"

  - number: 5
    after_chapter: 42
    slug: "lab-compose"
    title: "Multi-Container Applications with Compose"
    duration_minutes: 25
    difficulty: "medium"
    commands_tested:
      - docker compose up
      - docker compose down
      - Compose file writing
      - Service configuration
    pass_threshold: 70
    stability_multiplier: 1.5
    scenario: "Deploy a multi-tier web application using Docker Compose"

  - number: 6
    after_chapter: 50
    slug: "lab-swarm"
    title: "Swarm Orchestration"
    duration_minutes: 30
    difficulty: "hard"
    commands_tested:
      - docker swarm init
      - docker service create
      - docker service scale
      - docker stack deploy
    pass_threshold: 70
    stability_multiplier: 1.5
    scenario: "Set up a Swarm cluster and deploy scalable services"

  - number: 7
    after_chapter: 52
    slug: "lab-security"
    title: "Security Fundamentals"
    duration_minutes: 25
    difficulty: "medium"
    commands_tested:
      - Docker Content Trust
      - docker scan
      - User namespaces
      - Security best practices
    pass_threshold: 70
    stability_multiplier: 1.5
    scenario: "Implement Docker security controls and vulnerability management"

  - number: 8
    after_chapter: 54
    slug: "lab-installation-config"
    title: "Installation & Configuration"
    duration_minutes: 30
    difficulty: "hard"
    commands_tested:
      - Daemon configuration
      - Storage drivers
      - Logging drivers
      - Resource constraints
    pass_threshold: 70
    stability_multiplier: 1.5
    scenario: "Configure Docker Engine for production workloads"

  - number: 9
    after_chapter: 55
    slug: "lab-advanced-networking"
    title: "Advanced Networking"
    duration_minutes: 30
    difficulty: "hard"
    commands_tested:
      - Overlay networks
      - Network troubleshooting
      - Load balancing
      - Ingress routing
    pass_threshold: 70
    stability_multiplier: 1.5
    scenario: "Configure advanced networking for distributed applications"

  - number: 10
    after_chapter: 55
    slug: "lab-full-integration"
    title: "Full Stack Integration"
    duration_minutes: 45
    difficulty: "hard"
    commands_tested:
      - All major commands
      - Multi-domain scenarios
      - Best practices
      - Troubleshooting
    pass_threshold: 70
    stability_multiplier: 2.0
    scenario: "Deploy and manage a complete production-ready application"

  - number: 11
    after_chapter: 55
    slug: "lab-dca-mock-exam"
    title: "DCA Mock Examination"
    duration_minutes: 90
    difficulty: "hard"
    commands_tested:
      - All DCA domains
      - 55 questions
      - Exam format
    pass_threshold: 70
    stability_multiplier: 2.0
    scenario: "Complete DCA certification practice exam with 55 questions covering all domains"
    is_final_exam: true


# IIT JEE Inorganic Chemistry - Formula Memorization System

## Overview

This system addresses the critical need for systematic formula memorization in IIT JEE preparation. It provides **147 essential formulas** across all major inorganic chemistry topics, integrated with **FSRS-4.5 spaced repetition** for optimal long-term retention.

## Problem Solved

**Pain Point**: IIT JEE students struggle to remember hundreds of chemical formulas during exam preparation.

**Solution**: Automated formula drills with spaced repetition that ensure formulas are reviewed at optimal intervals based on individual mastery.

---

## System Components

### 1. Formula Database (147 Formulas)

Organized into 5 topic-based quiz sets:

#### Quiz 1: s-Block Elements (21 formulas)
**Alkali Metals** (Group 1):
- NaOH (Sodium hydroxide - Caustic soda)
- KOH (Potassium hydroxide - Caustic potash)
- Naâ‚‚COâ‚ƒÂ·10Hâ‚‚O (Sodium carbonate - Washing soda)
- NaHCOâ‚ƒ (Sodium bicarbonate - Baking soda)
- Naâ‚‚Sâ‚‚Oâ‚ƒÂ·5Hâ‚‚O (Sodium thiosulfate - Hypo)
- Naâ‚‚Oâ‚‚ (Sodium peroxide)
- KOâ‚‚ (Potassium superoxide)
- NaCl, KCl, Naâ‚‚SOâ‚„Â·10Hâ‚‚O

**Alkaline Earth Metals** (Group 2):
- CaCOâ‚ƒ (Calcium carbonate - Limestone/Marble)
- CaO (Calcium oxide - Quick lime)
- Ca(OH)â‚‚ (Calcium hydroxide - Slaked lime)
- CaSOâ‚„Â·2Hâ‚‚O (Calcium sulfate - Gypsum)
- CaSOâ‚„Â·Â½Hâ‚‚O (Plaster of Paris)
- MgSOâ‚„Â·7Hâ‚‚O (Magnesium sulfate - Epsom salt)
- Mg(OH)â‚‚ (Magnesium hydroxide - Milk of magnesia)
- BaSOâ‚„, BaClâ‚‚, MgO, CaClâ‚‚

---

#### Quiz 2: p-Block Elements (51 formulas)

**Group 13 - Boron Family**:
- Naâ‚‚Bâ‚„Oâ‚‡Â·10Hâ‚‚O (Borax)
- Hâ‚ƒBOâ‚ƒ (Boric acid)
- Alâ‚‚Oâ‚ƒ (Aluminium oxide - Alumina)
- Al(OH)â‚ƒ, AlClâ‚ƒ
- Kâ‚‚SOâ‚„Â·Alâ‚‚(SOâ‚„)â‚ƒÂ·24Hâ‚‚O (Alum)

**Group 14 - Carbon Family**:
- CO, COâ‚‚
- SiOâ‚‚ (Silicon dioxide - Silica)
- SiC (Silicon carbide - Carborundum)
- PbO (Lead oxide - Litharge)
- PbOâ‚‚, PbSOâ‚„, Pb(NOâ‚ƒ)â‚‚
- SnClâ‚‚ (Stannous chloride), SnClâ‚„ (Stannic chloride)

**Group 15 - Nitrogen Family**:
- NHâ‚ƒ (Ammonia)
- NHâ‚„Cl (Ammonium chloride - Sal ammoniac)
- NHâ‚„OH, NHâ‚„NOâ‚ƒ, (NHâ‚„)â‚‚SOâ‚„
- HNOâ‚ƒ (Nitric acid), HNOâ‚‚ (Nitrous acid)
- NO, NOâ‚‚, Nâ‚‚Oâ‚…
- Hâ‚ƒPOâ‚„ (Phosphoric acid)
- Pâ‚‚Oâ‚… (Phosphorus pentoxide)
- PClâ‚ƒ, PClâ‚…
- Caâ‚ƒ(POâ‚„)â‚‚ (Calcium phosphate)

**Group 16 - Oxygen Family (Chalcogens)**:
- Hâ‚‚SOâ‚„ (Sulfuric acid), Hâ‚‚SOâ‚ƒ (Sulfurous acid)
- SOâ‚‚ (Sulfur dioxide), SOâ‚ƒ (Sulfur trioxide)
- Hâ‚‚S (Hydrogen sulfide)
- FeSOâ‚„Â·7Hâ‚‚O (Ferrous sulfate - Green vitriol)
- CuSOâ‚„Â·5Hâ‚‚O (Copper sulfate - Blue vitriol)
- ZnSOâ‚„Â·7Hâ‚‚O (Zinc sulfate - White vitriol)

**Group 17 - Halogens**:
- HCl, HF, HBr, HI
- Ca(OCl)â‚‚ (Bleaching powder)
- NaOCl (Sodium hypochlorite)
- KClOâ‚ƒ (Potassium chlorate)
- KClOâ‚„ (Potassium perchlorate)
- Iâ‚‚

---

#### Quiz 3: d-Block Elements (32 formulas)

**Potassium Compounds**:
- KMnOâ‚„ (Potassium permanganate)
- Kâ‚‚Crâ‚‚Oâ‚‡ (Potassium dichromate)
- Kâ‚‚CrOâ‚„ (Potassium chromate)
- Kâ‚„[Fe(CN)â‚†] (Potassium ferrocyanide)
- Kâ‚ƒ[Fe(CN)â‚†] (Potassium ferricyanide)

**Iron Compounds**:
- FeSOâ‚„Â·7Hâ‚‚O (Ferrous sulfate - Green vitriol)
- FeClâ‚ƒ (Ferric chloride), FeClâ‚‚ (Ferrous chloride)
- Feâ‚‚Oâ‚ƒ (Rust), Feâ‚ƒOâ‚„ (Magnetite)
- (NHâ‚„)â‚‚SOâ‚„Â·FeSOâ‚„Â·6Hâ‚‚O (Mohr's salt)

**Copper Compounds**:
- CuSOâ‚„Â·5Hâ‚‚O (Copper sulfate - Blue vitriol)
- CuO (Cupric oxide), Cuâ‚‚O (Cuprous oxide)
- CuClâ‚‚, Cu(NOâ‚ƒ)â‚‚

**Zinc, Silver, Chromium, Manganese, Mercury Compounds**:
- ZnSOâ‚„Â·7Hâ‚‚O, ZnO, ZnClâ‚‚, ZnCOâ‚ƒ
- AgNOâ‚ƒ, AgCl, AgBr, AgI
- Crâ‚‚Oâ‚ƒ, Hâ‚‚CrOâ‚„, Hâ‚‚Crâ‚‚Oâ‚‡
- MnOâ‚‚, MnSOâ‚„
- HgClâ‚‚ (Corrosive sublimate), Hgâ‚‚Clâ‚‚ (Calomel), HgO

---

#### Quiz 4: Qualitative Analysis (20 formulas)

**Group Reagents**:
- HCl (Group I)
- Hâ‚‚S (Group II & IV)
- NHâ‚„OH + NHâ‚„Cl (Group III)
- (NHâ‚„)â‚‚COâ‚ƒ (Group V)

**Common Precipitates**:
- PbClâ‚‚, AgCl, Hgâ‚‚Clâ‚‚ (white ppts)
- CuS (black ppt), CdS (yellow ppt), PbS (black ppt)
- Fe(OH)â‚ƒ (brown ppt), Al(OH)â‚ƒ (white ppt)
- ZnS (white ppt), MnS (flesh colored ppt)
- BaSOâ‚„ (white ppt), CaCâ‚‚Oâ‚„ (white ppt)

**Confirmatory Test Reagents**:
- Kâ‚‚[HgIâ‚„] (Nessler's reagent)
- FeSOâ‚„ (Brown ring test)
- CrOâ‚‚Clâ‚‚ (Chromyl chloride test)

---

#### Quiz 5: Minerals and Ores (23 formulas)

**Aluminium Ores**:
- Alâ‚‚Oâ‚ƒÂ·2Hâ‚‚O (Bauxite)
- Naâ‚ƒAlFâ‚† (Cryolite)
- Alâ‚‚Oâ‚ƒ (Corundum)

**Iron Ores**:
- Feâ‚‚Oâ‚ƒ (Haematite)
- Feâ‚ƒOâ‚„ (Magnetite)
- FeSâ‚‚ (Iron pyrite - Fool's gold)
- FeCOâ‚ƒ (Siderite)

**Copper Ores**:
- CuFeSâ‚‚ (Copper pyrite/Chalcopyrite)
- Cuâ‚‚O (Cuprite)
- CuCOâ‚ƒÂ·Cu(OH)â‚‚ (Malachite)
- 2CuCOâ‚ƒÂ·Cu(OH)â‚‚ (Azurite)

**Zinc, Lead, and Other Ores**:
- ZnS (Zinc blende/Sphalerite), ZnCOâ‚ƒ (Calamine), ZnO (Zincite)
- PbS (Galena), PbSOâ‚„ (Anglesite), PbCOâ‚ƒ (Cerrusite)
- HgS (Cinnabar - mercury ore)
- NaCl (Rock salt/Halite)
- MgCOâ‚ƒÂ·CaCOâ‚ƒ (Dolomite)
- CaFâ‚‚ (Fluorite/Fluorspar)

---

## FSRS Spaced Repetition Integration

### How It Works

The system leverages the existing **FSRS-4.5 algorithm** already implemented in your codebase:

#### 1. **Automatic Integration on Quiz Failure**

When a student fails a formula question:
```ruby
# app/models/quiz_attempt.rb (lines 134-148)
after_create :add_failed_questions_to_reviews

def add_failed_questions_to_reviews
  failed_questions.each do |question|
    SpacedRepetitionItem.find_or_create_by(
      user: user,
      item: question
    ) do |sri|
      sri.state = 'new'
      sri.difficulty = question.difficulty
      sri.stability = 1.0  # Initial stability
    end
  end
end
```

#### 2. **FSRS Scheduling**

The `FSRSSchedulingService` calculates optimal review intervals:
```ruby
# app/services/fsrs_scheduling_service.rb
class FSRSSchedulingService
  # Uses FSRS-4.5 parameters:
  # - difficulty: How hard the item is (0.0 to 1.0)
  # - stability: Time until forgetting (in days)
  # - Calculates next_review_at based on user performance
end
```

#### 3. **Review Grades**

After reviewing a formula, students rate their recall:
- **1 (Again)**: Forgot completely â†’ Stability decreases
- **2 (Hard)**: Recalled with difficulty â†’ Small stability increase
- **3 (Good)**: Recalled correctly â†’ Moderate stability increase
- **4 (Easy)**: Recalled instantly â†’ Large stability increase

#### 4. **Automatic Decay**

The system automatically applies decay based on time:
```ruby
# Formulas become "due for review" when:
# current_time >= next_review_at
```

---

## Current State vs. Needed Enhancements

### âœ… What Already Works

1. **Formula Database**: 147 formulas created and seeded
2. **Quiz Structure**: 5 topic-based quizzes ready
3. **API Integration**: Formulas accessible via `/api/v1/chemistry/quizzes/:id/questions`
4. **FSRS Infrastructure**: Complete spaced repetition system ready
5. **Automatic Review Addition**: Failed questions auto-added to review queue

### ðŸ”¨ What Needs To Be Built

#### **Frontend Integration** (Priority: HIGH)

**Current Gap**: No UI to show "Daily Formula Review"

**What To Build**:
```jsx
// Add to ChemistryCourseViewer.jsx

const [dueReviews, setDueReviews] = useState([]);

useEffect(() => {
  // Fetch due formulas from reviews API
  fetch('/reviews')
    .then(res => res.json())
    .then(data => {
      const quizQuestionReviews = data.quiz_question_reviews || [];
      setDueReviews(quizQuestionReviews);
    });
}, []);

return (
  <div>
    {dueReviews.length > 0 && (
      <div className="bg-yellow-50 border-2 border-yellow-400 rounded-xl p-6 mb-6">
        <h3 className="text-xl font-bold text-yellow-900 mb-2">
          ðŸ“… Daily Formula Review
        </h3>
        <p className="text-yellow-800 mb-4">
          You have {dueReviews.length} formulas due for review today
        </p>
        <button
          onClick={() => startReviewSession()}
          className="px-6 py-3 bg-yellow-600 text-white rounded-lg font-semibold"
        >
          Start Review Session
        </button>
      </div>
    )}
    {/* Rest of course content */}
  </div>
);
```

**Review Session Component**:
```jsx
const FormulaReviewSession = ({ reviews }) => {
  const [currentReview, setCurrentReview] = useState(0);
  const [userAnswer, setUserAnswer] = useState('');

  const handleSubmit = async (grade) => {
    // Submit to /reviews/:id/submit with FSRS grade (1-4)
    await fetch(`/reviews/${reviews[currentReview].id}/submit`, {
      method: 'POST',
      body: JSON.stringify({ grade })
    });

    // Move to next review
    setCurrentReview(curr => curr + 1);
  };

  return (
    <div className="formula-review">
      <QuestionDisplay question={reviews[currentReview].question} />
      <AnswerInput value={userAnswer} onChange={setUserAnswer} />
      <GradeButtons onGrade={handleSubmit} />
    </div>
  );
};
```

#### **Proactive Formula Learning** (Priority: MEDIUM)

**Current Gap**: Students must fail a quiz to add formulas to reviews

**Enhancement**: Add "Study Mode" where students can preemptively add formulas:
```ruby
# New controller action
def add_to_study_deck
  question = QuizQuestion.find(params[:question_id])

  SpacedRepetitionItem.find_or_create_by(
    user: current_user,
    item: question
  )

  render json: { success: true }
end
```

Frontend:
```jsx
<button onClick={() => addToStudyDeck(questionId)}>
  âž• Add to Daily Review
</button>
```

---

## Usage Workflow

### For Students

#### Step 1: Take Formula Drills
```
1. Navigate to: /chemistry/iit-jee-inorganic-chemistry
2. Open "Essential Formulas - Daily Drill" module
3. Take any of the 5 quiz sets
4. Failed formulas automatically added to review queue
```

#### Step 2: Daily Reviews
```
1. Visit /reviews page
2. See "Quiz Question Reviews" section
3. Review formulas using FSRS scheduling
4. Rate recall: Again (1), Hard (2), Good (3), Easy (4)
```

#### Step 3: Track Progress
```
1. Check SpacedRepetitionItem state:
   - new: Just added
   - learning: Currently learning
   - review: Being reviewed
   - relearning: Re-learning after failure

2. Monitor mastery metrics:
   - stability: Days until forgetting
   - difficulty: Personal difficulty rating
   - review_count: Total reviews completed
```

---

## Database Schema

### QuizQuestion (Formula Storage)
```ruby
quiz_id: integer          # Links to Quiz
question_type: 'fill_blank'
question_text: "What is the chemical formula for Sodium hydroxide (Caustic soda)?"
correct_answer: "NaOH"    # Supports alternatives: "NaOH|Na-OH"
explanation: "Sodium hydroxide (Caustic soda) has the formula NaOH"
difficulty: 0.0           # IRT difficulty for adaptive learning
topic: 's-block elements'
skill_dimension: 'memorization'
```

### SpacedRepetitionItem (Review Tracking)
```ruby
user_id: integer
item_type: 'QuizQuestion'
item_id: integer
state: 'new|learning|review|relearning'
difficulty: decimal       # FSRS difficulty (0.0 to 1.0)
stability: decimal        # Days until forgetting
next_review_at: datetime  # When to review next
review_count: integer
lapse_count: integer
```

---

## Testing the System

### Manual Test Workflow

```bash
# 1. Verify formulas exist
rails runner "
  quiz = Quiz.find_by(title: 's-Block Formulas Drill')
  puts \"Quiz ID: #{quiz.id}\"
  puts \"Questions: #{quiz.quiz_questions.count}\"
"

# 2. Test API endpoint
curl "http://localhost:3000/api/v1/chemistry/quizzes/1190/questions" | jq

# 3. Verify formula module appears
curl "http://localhost:3000/api/v1/chemistry/courses/iit-jee-inorganic-chemistry" \
  | jq '.course.modules[] | select(.slug == "formula-drills")'

# 4. Test review integration (after taking quiz)
rails runner "
  user = User.first
  quiz_question_reviews = user.spaced_repetition_items.for_quiz_questions
  puts \"Due formulas: #{quiz_question_reviews.due.count}\"
"
```

---

## Future Enhancements

### Phase 2: Advanced Features

1. **Formula Flashcards**
   - Front/back card UI
   - Swipe gestures for mobile
   - "Flip card" interaction

2. **Formula Categories**
   - Filter by element group (s-block, p-block, etc.)
   - Filter by topic (acids, bases, salts, etc.)
   - Search formulas by name

3. **Mastery Visualization**
   - Progress bar: "87/147 formulas mastered"
   - Heat map of formula retention
   - Weak areas identification

4. **Offline Mode**
   - Download formulas for offline study
   - Sync review progress when online

5. **Gamification**
   - Streaks: "7-day formula review streak! ðŸ”¥"
   - Leaderboards: Compare with peers
   - Achievements: "s-Block Master", "100 Formulas Memorized"

---

## File References

### Seed Files
- **Formula Database**: `db/seeds/iit_jee_inorganic_formulas.rb`
- **Base Course**: `db/seeds/iit_jee_inorganic_chemistry.rb`

### Models
- **QuizQuestion**: `app/models/quiz_question.rb`
- **SpacedRepetitionItem**: `app/models/spaced_repetition_item.rb`
- **Quiz**: `app/models/quiz.rb`
- **QuizAttempt**: `app/models/quiz_attempt.rb`

### Services
- **FSRSSchedulingService**: `app/services/fsrs_scheduling_service.rb`
- **SpacedRepetitionService**: `app/services/spaced_repetition_service.rb`
- **FsrsService**: `app/services/fsrs_service.rb`

### Controllers
- **ReviewsController**: `app/controllers/reviews_controller.rb`
- **ChemistryCoursesController (API)**: `app/controllers/api/v1/chemistry/chemistry_courses_controller.rb`

### Frontend
- **ChemistryCourseViewer**: `app/javascript/components/ChemistryCourseViewer.jsx`
- **ChemistryQuizViewer**: `app/javascript/components/ChemistryQuizViewer.jsx`
- **ChemistryQuestionTypes**: `app/javascript/components/ChemistryQuestionTypes.jsx`

---

## Success Metrics

### Key Performance Indicators (KPIs)

1. **Formula Retention**: % of formulas retained after 30 days
2. **Review Adherence**: % of due reviews completed daily
3. **Mastery Rate**: Average time to reach "mastered" state
4. **Exam Performance**: JEE Mock test scores (formula questions)

### Target Goals

- **90%** retention rate for formulas reviewed 3+ times
- **80%** daily review completion rate
- **<30 days** average time to master a formula
- **95%+** accuracy on JEE formula questions

---

**Status**: âœ… Phase 1 Complete (Database & Infrastructure)
**Next**: Frontend integration for Daily Formula Review
**Timeline**: ~2-3 days for full frontend integration

---

*Documentation last updated: November 2025*
